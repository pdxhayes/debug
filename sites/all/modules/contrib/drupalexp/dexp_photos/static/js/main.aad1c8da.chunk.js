(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,n){e.exports=n(370)},370:function(e,t,n){"use strict";n.r(t);n(183);var a=n(0),o=n.n(a),i=n(7),r=n.n(i),l=n(13),c=n.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(178),u=n(15),d=n(16),h=n(20),p=n(19),m=n(21),f=n(379),v=n(85),b=n.n(v),g=n(86),x=n(375),w=n(371),E=n(381),y=n(374),O=function(e){return window.dexpTranslate.t(e)},S=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={title:"",description:"",loading:!1,error:null},n.handleOnChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(g.a)({},t,a))},n.handleSubmit=function(e){e.preventDefault(),n.addAlbum()},n.addAlbum=function(){var e=n.props,t=e.onAlbumSaved,a=e.album,o=n.state,i={title:o.title,description:o.description};n.setState({loading:!0,error:null},function(){a?(i.uid=a.uid,window.dexpService.put("/dexp/albums/".concat(a.id),i).then(function(e){t&&t(e.data)}).catch(function(e){n.setState({loading:!1,error:c.a.get(e,"response.data.error",e.toLocaleString())})})):window.dexpService.post("/dexp/albums",i).then(function(e){n.setState({loading:!1,error:null},function(){t&&t(e.data)})}).catch(function(e){console.log(e),n.setState({loading:!1,error:c.a.get(e,"response.data.error",e.toLocaleString())})})})},n.handleOk=function(){n.addAlbum()},n.handleCancel=function(){var e=n.props.handleCancel;e&&e()},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.album;e&&this.setState({title:e.title,description:e.description})}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.album,a=this.state,i=a.title,r=a.description,l=a.loading,c=a.error;return o.a.createElement("div",null,o.a.createElement(x.a,{confirmLoading:l,title:O(n?"Edit Album":"Add new album"),visible:t,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement(w.a,{onSubmit:this.handleSubmit},c?o.a.createElement(E.a,{message:c,type:"error"}):null,o.a.createElement(w.a.Item,null,o.a.createElement(y.a,{name:"title",onChange:this.handleOnChange,value:i,placeholder:O("Album title")})),o.a.createElement(w.a.Item,null,o.a.createElement(y.a.TextArea,{name:"description",onChange:this.handleOnChange,value:r,placeholder:O("Album description")})))))}}]),t}(o.a.Component),j=n(17),A=n(378),k=n(11),C=n(377),N=n(376),D=n(18),U=n(373),P=n(61),I=o.a.createContext({albums:[],settings:[]}),T=n(177),F=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,error:null,title:"",description:""},n.handleOk=function(){n.save()},n.handleCancel=function(){var e=n.props.handleCancel;e&&e()},n.handleOnChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(g.a)({},t,a))},n.handleSubmit=function(e){e.preventDefault(),n.save()},n.save=function(){var e=n.state,t=e.title,a=e.description,o=n.props.onSave;o&&o({title:t,description:a})},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.photo.response,t=e.title,n=e.description;this.setState({title:t,description:n})}},{key:"render",value:function(){var e=this.props.visible,t=this.state,n=t.loading,a=t.error,i=t.title,r=t.description;return o.a.createElement(x.a,{confirmLoading:n,title:O("Edit photo"),visible:e,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement(w.a,{onSubmit:this.handleSubmit},a?o.a.createElement(E.a,{message:a,type:"error"}):null,o.a.createElement(w.a.Item,null,o.a.createElement(y.a,{name:"title",onChange:this.handleOnChange,value:i,placeholder:O("Photo title")})),o.a.createElement(w.a.Item,null,o.a.createElement(y.a.TextArea,{name:"description",onChange:this.handleOnChange,value:r,placeholder:O("Photo description")}))))}}]),t}(o.a.Component);function B(){var e=Object(j.a)(["\n  display: flex;\n  flex-grow: 1;\n  text-align: center;\n  justify-content: center;\n\n"]);return B=function(){return e},e}function z(){var e=Object(j.a)(["\n  width: 104px;\n  height: 104px;\n  text-align: center;\n  float: left;\n  position: relative;\n  overflow: hidden;\n  margin: 5px;\n  padding: 8px;\n  background: ",";\n  .preview-image{\n    max-width: 100%;\n  }\n  .dexp-photo-grid-inner{\n    height: 100%;\n  }\n   .dexp-photo-item-done{\n    img{\n      max-width: 100%;\n      width: 100%;\n      height: auto;\n    }\n   }\n   .dexp-photo-action-hover{\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 2px;\n    background: #FFF;\n    display: none;\n    z-index: 2;\n   }\n   \n   &:hover, &.on-hover{\n    .dexp-photo-action-hover{\n      display: block;\n    }\n    .dexp-photo-grid-inner{\n      &:before{\n      content: '';\n        position: absolute;\n        background: rgba(0,0,0,0.3);\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 1;\n      }\n    }\n   }\n"]);return z=function(){return e},e}var L=x.a.confirm,M=D.a.div(z(),function(e){return e.error?"#fff1f0":"none"}),R=D.a.div(B()),W=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={hover:!1,modal:!1,editPhoto:!1},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.hover,a=t.modal,i=t.editPhoto,r=this.props,l=r.photo,s=r.onDelete,u=r.onSave,d=c.a.get(l,"response.title",l.name),h="error"===c.a.get(l,"status"),p=o.a.createElement(I.Consumer,null,function(t){return o.a.createElement(A.a,null,"done"===l.status&&o.a.createElement(A.a.Item,{onClick:function(){e.setState({editPhoto:!0})}},o.a.createElement(k.a,{type:"edit"})," Edit"),o.a.createElement(A.a.Item,{onClick:function(){L({title:O("Delete photo"),content:O("Please confirm that you want to delete this picture?"),onOk:function(){s&&s(l),l.response&&t.handleDeletePhoto(l.response)},onCancel:function(){}})}},o.a.createElement(k.a,{type:"delete"})," Delete"))});return o.a.createElement(I.Consumer,null,function(t){return o.a.createElement(M,{error:h,className:"dexp-photo-widget-grid ".concat(n?"on-hover":" no-hover")},o.a.createElement("div",{className:"dexp-photo-action-hover"},o.a.createElement(N.a,{onVisibleChange:function(t){e.setState({hover:t})},overlay:p},o.a.createElement("a",{className:"ant-dropdown-link"},o.a.createElement(k.a,{type:"ellipsis"})))),o.a.createElement("div",{onClick:function(){"done"===l.status&&e.setState({modal:!0})},className:"dexp-photo-grid-inner"},"uploading"===l.status&&o.a.createElement("div",{className:"dexp-photo-item-uploading"},o.a.createElement(T.a,{width:80,type:"circle",percent:c.a.get(l,"percent")})),"done"===l.status&&o.a.createElement("div",{className:"dexp-photo-item-done"},o.a.createElement("img",{src:c.a.get(l,"response.file.thumbnail"),alt:l.response.title})),"error"===l.status&&o.a.createElement("div",null,"Upload error"),o.a.createElement("div",{className:"filename"},d)),o.a.createElement(x.a,{width:"90%",centered:!0,visible:a,title:d,onCancel:function(){e.setState({modal:!1})},footer:null},o.a.createElement(R,{className:"image-preview-container"},o.a.createElement("img",{style:{maxWidth:"100%"},className:"preview-image",src:c.a.get(l,"response.file.preview"),alt:""}))),i?o.a.createElement(F,{onSave:function(e){var t=e.title,n=e.description,a=l;a.response.title=t,a.response.description=n,window.dexpService.put("/dexp/photos/".concat(l.response.id),a.response),u&&u(a)},handleCancel:function(){e.setState({editPhoto:!1})},visible:!0,photo:l}):null)})}}]),t}(o.a.Component);function V(){var e=Object(j.a)(["\n  display: table;\n  float: left;\n  \n"]);return V=function(){return e},e}var J=D.a.div(V()),K=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={previewVisible:!1,previewImage:"",photos:[]},n.handleChange=function(e,t){var a=e.file,o=n.state.photos,i=o.findIndex(function(e){return e.uid===a.uid});-1!==i?o[i]=a:o.push(a),n.setState({photos:o}),"done"===a.status&&t.addPhotoToAlbum(c.a.get(a,"response"))},n.onSortEnd=function(e,t){var a=e.oldIndex,o=e.newIndex;n.setState(function(e){var t=e.photos;return{photos:b()(t,a,o)}},function(){var e=[],a=[];n.state.photos.forEach(function(t,n){e.push({id:c.a.get(t,"response.id"),weight:n}),a.push(c.a.get(t,"response"))}),window.dexpService.put("/dexp/photos/batch-update-weight",e),t.setAlbumPhotos(a)})},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.photos,a=t.albumId;n.length&&(n=n.map(function(e){return{uid:e.id,status:"done",response:e}}),this.setState({photos:n})),window.dexpService.get("/dexp/albums/".concat(a,"/photos")).then(function(t){var n=[];c.a.each(t.data,function(e){n.push({uid:e.id,status:"done",response:e})}),e.setState({photos:n})})}},{key:"render",value:function(){var e=this,t=this.state.photos,n=this.state,a=n.previewVisible,i=n.previewImage,r=o.a.createElement("div",null,o.a.createElement(k.a,{type:"plus"}),o.a.createElement("div",{className:"ant-upload-text"},"Upload")),l=window.dexpService.getBaseUrl(),c=Object(P.SortableElement)(function(n){var a=n.value;return o.a.createElement(W,{onSave:function(n){var a=t.findIndex(function(e){return e.response.id===n.id});-1!==a&&(t[a]=n),e.setState({photos:t})},onDelete:function(n){t=t.filter(function(e){return e.uid!==n.uid}),e.setState({photos:t})},photo:a})}),s=Object(P.SortableContainer)(function(e){var t=e.items;return o.a.createElement(J,{className:"dexp-photos-grid"},t.map(function(e,t){return o.a.createElement(c,{key:"item-".concat(t),index:t,value:e})}))});return o.a.createElement(I.Consumer,null,function(n){return o.a.createElement("div",{className:"clearfix"},o.a.createElement(s,{distance:5,axis:"xy",items:t,onSortEnd:function(t){return e.onSortEnd(t,n)}}),o.a.createElement(U.a,{withCredentials:!0,name:"files",multiple:!0,showUploadList:!1,action:"".concat(l,"/dexp/albums/").concat(n.viewAlbum.id,"/photos"),listType:"picture-card",onPreview:e.handlePreview,onChange:function(t){return e.handleChange(t,n)}},r),o.a.createElement(x.a,{visible:a,footer:null,onCancel:e.handleCancel},o.a.createElement("img",{alt:"example",style:{width:"100%"},src:i})))})}}]),t}(o.a.Component);function $(){var e=Object(j.a)(["\n\n\n"]);return $=function(){return e},e}var _=x.a.confirm,q=D.a.div($()),G=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={edit:!1},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.edit,n=this.props,a=n.album,i=n.onBack,r=o.a.createElement(I.Consumer,null,function(t){return o.a.createElement(A.a,null,o.a.createElement(A.a.Item,{onClick:function(){e.setState({edit:!0})}},o.a.createElement(k.a,{type:"edit"})," Edit"),o.a.createElement(A.a.Item,{onClick:function(){_({title:O("Delete album"),content:O("Please confirm that you want to delete this album?"),onOk:function(){t.handleDeleteAlbum(a)},onCancel:function(){}})}},o.a.createElement(k.a,{type:O("delete")})," Delete"))});return o.a.createElement(I.Consumer,null,function(n){return o.a.createElement(q,{className:"dexp-album-details"},o.a.createElement(C.a,{onBack:function(){i&&i()},title:a.title,subTitle:a.description,tags:o.a.createElement(N.a,{overlay:r},o.a.createElement("a",{className:"ant-dropdown-link"},"Actions ",o.a.createElement(k.a,{type:"ellipsis"})))}),o.a.createElement(K,{albumId:a.id,photos:n.viewAlbum.photos?n.viewAlbum.photos:[]}),t&&o.a.createElement(S,{onAlbumSaved:function(t){e.setState({edit:!1}),n.onAlbumUpdated(t)},handleCancel:function(){e.setState({edit:!1})},visible:!0,album:a}))})}}]),t}(o.a.Component),H=n(372);function Q(){var e=Object(j.a)(["\n  background: rgba(0,0,0,0.02);\n  min-height: 150px;\n"]);return Q=function(){return e},e}function X(){var e=Object(j.a)(["\n  padding: 5px;\n  img{\n      max-height: 150px;\n    \n  }\n  \n \n"]);return X=function(){return e},e}var Y=H.a.Meta,Z=D.a.div(X()),ee=D.a.div(Q()),te=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.album,t=c.a.get(e,"photos[0].file.preview");return o.a.createElement(Z,{className:"dexp-photos-album"},o.a.createElement(H.a,{size:"small",hoverable:!0,cover:t?o.a.createElement("img",{alt:e.title,src:t}):o.a.createElement(ee,null)},o.a.createElement(Y,{title:e.title,description:e.description})))}}]),t}(o.a.Component);function ne(){var e=Object(j.a)(["\n margin-bottom: 10px;\n float: left;\n width: 200px;\n height: 220px;\n"]);return ne=function(){return e},e}function ae(){var e=Object(j.a)(["\n  float: left;\n  display: table;\n  &:before, &:after{\n    clear: both;\n    content: '';\n  }\n \n"]);return ae=function(){return e},e}function oe(){var e=Object(j.a)(["\n  display: table;\n  &:before, &:after{\n    clear: both;\n    content: '';\n  }\n  .ant-card-cover{\n    min-height: 150px;\n  }\n  \n"]);return oe=function(){return e},e}function ie(){var e=Object(j.a)(["\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n  align-content: center;\n  padding: 20px;\n  float: left;\n  width: 200px;\n  height: 220px;\n"]);return ie=function(){return e},e}var re=D.a.div(ie()),le=D.a.div(oe()),ce=D.a.div(ae()),se=D.a.div(ne()),ue=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).onSortEnd=function(e,t){var n=e.oldIndex,a=e.newIndex;t.handleSortAlbums(n,a)},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=Object(P.SortableElement)(function(e){var t=e.album,n=e.context;return o.a.createElement(se,{onClick:function(){return n.handleViewAlbum(t)},span:3},o.a.createElement(te,{album:t}))}),n=Object(P.SortableContainer)(function(e){var n=e.items,a=e.context;return o.a.createElement(ce,{type:"flex",justify:"start",className:"dexp-photos-grid"},n.map(function(e,n){return o.a.createElement(t,{context:a,key:"item-".concat(n),index:n,album:e})}))});return o.a.createElement(I.Consumer,null,function(t){return o.a.createElement(le,{type:"flex",justify:"start",className:"dexp-photos-grid-container"},o.a.createElement(n,{context:t,distance:5,axis:"xy",items:t.albums,onSortEnd:function(n){return e.onSortEnd(n,t)}}),o.a.createElement(re,{onClick:t.handleShowAddAlbumModal},o.a.createElement(k.a,{type:"plus"}),o.a.createElement("div",null,"Create album")))})}}]),t}(o.a.Component),de=function(e,t,n){f.a[e]({message:t,description:n})},he=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={showAddAlbum:!1,viewAlbum:null,albums:[]},n.handleUpdateTextarea=function(){var e=n.props.inputElement,t=n.state.albums,a=[];t.forEach(function(e){a.push(e.id)}),e.value=JSON.stringify(a)},n.handleShowAddAlbumModal=function(){n.setState({showAddAlbum:!0})},n.onAlbumSaved=function(e){var t=n.state.albums;n.setState({albums:[].concat(Object(s.a)(t),[e]),showAddAlbum:!1},function(){n.handleUpdateTextarea()})},n.onAlbumUpdated=function(e){var t=n.state.viewAlbum;t.id===e.id&&n.setState({viewAlbum:Object.assign(t,e)});var a=n.state.albums;a.map(function(t){return t.id===e.id?Object.assign(t,e):t}),n.setState({albums:a})},n.handleViewAlbum=function(e){n.setState({viewAlbum:e})},n.handleDeleteAlbum=function(e){var t=n.state.albums;t=t.filter(function(t){return t.id!==e.id}),n.setState({viewAlbum:null,albums:t},function(){n.handleUpdateTextarea(),window.dexpService.delete("/dexp/albums/".concat(e.id)).catch(function(e){de("error","Delete album error",c.a.get(e,"response.data.error",e.toLocaleString()))})})},n.setAlbumPhotos=function(e){var t=n.state,a=t.viewAlbum,o=t.albums;a.photos=e,o.map(function(t){return t.id===a.id&&(t.photos=e),t}),n.setState({viewAlbum:a,albums:o})},n.addPhotoToAlbum=function(e){var t=n.state,a=t.viewAlbum,o=t.albums;if(a.id===e.album_id){a.photos||(a.photos=[]),a.photos=a.photos.filter(function(t){return t.id!==e.id});var i=a.photos.findIndex(function(t){return t.id===e.id});-1===i?a.photos.push(e):a.photos[i]=e}o=o.map(function(e){return e.id===a.id?a:e}),n.setState({viewAlbum:a,albums:o})},n.handleDeletePhoto=function(e){var t=n.state,a=t.viewAlbum,o=t.albums;a.photos||(a.photos=[]),a.photos=a.photos.filter(function(t){return t.id!==e.id}),o=o.map(function(e){return e.id===a.id?a:e}),n.setState({viewAlbum:a,albums:o},function(){window.dexpService.delete("/dexp/photos/".concat(e.id)).catch(function(e){de("error","Delete photo error",c.a.get(e,"response.data.error",e.toLocaleString()))})})},n.handleBackToRoot=function(){n.setState({viewAlbum:!1})},n.handleSortAlbums=function(e,t){n.setState(function(n){var a=n.albums;return{albums:b()(a,e,t)}},function(){n.handleUpdateTextarea()})},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.albums;this.setState({albums:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.albums,a=t.showAddAlbum,i=t.viewAlbum;return o.a.createElement(I.Provider,{value:{albums:n,viewAlbum:i,handleShowAddAlbumModal:this.handleShowAddAlbumModal,onAlbumSaved:this.onAlbumSaved,handleViewAlbum:this.handleViewAlbum,handleBackToRoot:this.handleBackToRoot,onAlbumUpdated:this.onAlbumUpdated,handleDeleteAlbum:this.handleDeleteAlbum,setAlbumPhotos:this.setAlbumPhotos,addPhotoToAlbum:this.addPhotoToAlbum,handleDeletePhoto:this.handleDeletePhoto,handleSortAlbums:this.handleSortAlbums}},o.a.createElement("div",{className:"dexp-photos-widget"},i?o.a.createElement(G,{onBack:function(){e.setState({viewAlbum:null})},album:i}):o.a.createElement(ue,null),a?o.a.createElement(S,{onAlbumSaved:this.onAlbumSaved,visible:a,handleCancel:function(){e.setState({showAddAlbum:!1})}}):null))}}]),t}(o.a.Component),pe=n(62),me=n.n(pe),fe=function(){function e(){var t=this;Object(u.a)(this,e),this.getUrl=function(e){return"".concat(t.baseUrl).concat(e)},this.getOptions=function(){return{headers:{"Content-Type":"application/json"}}},this.get=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===n&&(n=t.getOptions()),me.a.get(t.getUrl(e),n)},this.post=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===a&&(a=t.getOptions()),me.a.post(t.getUrl(e),n,a)},this.put=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===a&&(a=t.getOptions()),me.a.put(t.getUrl(e),n,a)},this.upload=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]},this.delete=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===n&&(n=t.getOptions()),me.a.delete(t.getUrl(e),n)},this.baseUrl="",me.a.defaults.withCredentials=!0}return Object(d.a)(e,[{key:"setBaseUrl",value:function(e){var t="";e.length&&"/"===e.charAt(e.length-1)&&(t=e.slice(0,-1)),this.baseUrl=t}},{key:"getBaseUrl",value:function(){return this.baseUrl}}]),e}(),ve=n(380);function be(){var e=Object(j.a)(["\n \n  opacity: ",";\n\n"]);return be=function(){return e},e}function ge(){var e=Object(j.a)(["\n overflow-y: hidden;\n overflow-x: auto;\n padding: 5px 5px 5px 0;\n width: ","px;\n"]);return ge=function(){return e},e}function xe(){var e=Object(j.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(134,134,134,1);\n  z-index: 10000;\n  display: flex;\n  .dexp-photos-exit-fullscreen{\n    color: #FFF;\n    position: absolute;\n    right: 10px;\n    top: 10px;\n  }\n  .dexp-photos-slideshow-inner{\n    display: flex;\n    flex-grow: 1;\n    flex-direction: column;\n  }\n  .dexp-photos-main-photo{\n    padding: 10px;\n    flex-grow: 1;\n    height: calc(100% - 150px);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    img{\n      max-width: 100%;\n      max-height: 100%;\n    }\n  }\n  .dexp-photos-thumbnails{\n     height: 110px;\n     display: flex;\n     justify-content: center;\n     img{\n        cursor: pointer;\n        width: 100px;\n        height: 100px;\n        margin-left: 5px;\n     }\n  }\n  .dexp-photos-slideshow-nav{\n    cursor: pointer;\n    padding: 5px;\n    color: #FFF;\n    left: 20px;\n    top: 45%;\n    position: absolute;\n    &.dexp-photos-next{\n      left: auto;\n      right: 20px;\n    }\n    \n  }\n"]);return xe=function(){return e},e}var we=D.a.div(xe()),Ee=D.a.div(ge(),function(e){return e.width}),ye=D.a.img(be(),function(e){return e.active?.7:1}),Oe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={photos:[],active:0,width:window.innerWidth},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.album,a=t.active;document.addEventListener("keydown",this.onKeydown.bind(this),!1),window.addEventListener("resize",this.onResize.bind(this)),this.setState({photos:n.photos,width:window.innerWidth,active:a}),window.dexpService.get("/dexp/albums/".concat(n.id,"/photos")).then(function(t){e.setState({photos:t.data})})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeydown.bind(this),!1),window.removeEventListener("resize",this.onResize.bind(this))}},{key:"onResize",value:function(){this.setState({width:window.innerWidth})}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.handleExitFullScreen(),37===e.keyCode&&this.prev(),39===e.keyCode&&this.next()}},{key:"handleExitFullScreen",value:function(){var e=this.props.onExit;e&&e()}},{key:"prev",value:function(){var e=this.state,t=e.active,n=e.photos,a=t-1;0===t&&(a=n.length-1),this.setState({active:a})}},{key:"next",value:function(){var e=this.state,t=e.active,n=t+1;t===e.photos.length-1&&(n=0),this.setState({active:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.photos,a=t.active,i=t.width,r=n[a];return o.a.createElement(we,{id:"dex-photos-slideshow"},o.a.createElement("div",{className:"dexp-photos-exit-fullscreen"},o.a.createElement(k.a,{width:50,onClick:function(){e.handleExitFullScreen()},type:"fullscreen-exit"})),o.a.createElement("div",{onClick:function(){e.prev()},className:"dexp-photos-slideshow-nav dexp-photos-prev"},o.a.createElement(k.a,{width:50,type:"left"})),o.a.createElement("div",{onClick:function(){e.next()},className:"dexp-photos-slideshow-nav dexp-photos-next"},o.a.createElement(k.a,{width:50,type:"right"})),o.a.createElement("div",{className:"dexp-photos-slideshow-inner"},o.a.createElement("div",{className:"dexp-photos-main-photo"},o.a.createElement("img",{src:c.a.get(r,"file.preview"),alt:""})),o.a.createElement(Ee,{width:i,className:"dexp-photos-thumbnails"},n.map(function(t,n){return o.a.createElement(ye,{onClick:function(){e.setState({active:n})},key:n,active:n===a,src:c.a.get(t,"file.thumbnail")})}))))}}]),t}(o.a.Component);function Se(){var e=Object(j.a)(['\n  background: url("','") scroll 0 0 no-repeat;\n  background-size: cover; \n  width: 220px;\n  height: 220px;\n  margin-bottom: 5px;\n  cursor: pointer;\n  &:last-child{\n  margin-bottom: 0;\n  }\n']);return Se=function(){return e},e}function je(){var e=Object(j.a)(['\n  margin-right: 5px;\n  background: url("','") scroll 0 0 no-repeat;\n  background-size: cover; \n  height: 445px;\n  cursor: pointer;\n']);return je=function(){return e},e}function Ae(){var e=Object(j.a)(["\n\n.dexp-album-photos{\n  display: flex;\n  flex-direction: row;\n  .dexp-photos-large-photo{\n    flex-grow: 1;\n    img{\n      max-width: 100%;\n      width: 100%;\n      height: auto;\n      max-height: 400px;\n    }\n  }\n  .dexp-thumbnail-photos-thumbnails{\n    position: relative;\n    width: 250px;  \n    height: 450px; \n    display: flex;\n    overflow: hidden;\n    flex-direction: column;\n    img{\n      max-width: 100%;\n      max-height: 200px;\n      \n    }\n  }\n  \n}\n.dexp-photos-see-more{\n  left: 0;\n  text-align: center;\n  position: absolute;\n  bottom: 20px;\n  right: 0;\n  color: #FFF;\n}\n\n"]);return Ae=function(){return e},e}var ke=D.a.div(Ae()),Ce=D.a.div(je(),function(e){return e.img}),Ne=D.a.div(Se(),function(e){return e.img}),De=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={slideshow:!1,active:0},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.slideshow,a=t.active,i=this.props.album,r=c.a.get(i,"photos[0]",null),l=c.a.get(i,"count",0),s=[];if(i.photos.length>1)for(var u=1;u<i.photos.length;u++)s.push(i.photos[u]);return o.a.createElement(ke,{className:"dexp-photos-album"},o.a.createElement("div",{className:"dexp-album-title"},i.title,"  ",o.a.createElement(ve.a,{count:i.count,style:{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}})),o.a.createElement("div",{className:"dexp-album-photos"},r?o.a.createElement(Ce,{onClick:function(){e.setState({slideshow:!0,active:0})},img:c.a.get(r,"file.preview",null),className:"dexp-photos-large-photo"}):null,s.length?o.a.createElement("div",{className:"dexp-thumbnail-photos-thumbnails"},s.map(function(t,n){return o.a.createElement(Ne,{onClick:function(){e.setState({slideshow:!0,active:n+1})},key:n,img:c.a.get(t,"file.preview",null),className:"dexp-photos-thumbnail-item"})}),l-3>0?o.a.createElement("div",{className:"dexp-photos-see-more"},"".concat(O("See")," ").concat(l-3," more photos")):null):null),n?o.a.createElement(Oe,{onExit:function(){e.setState({slideshow:!1})},active:a,album:i}):null)}}]),t}(o.a.Component);function Ue(){var e=Object(j.a)(["\n\n\n\n"]);return Ue=function(){return e},e}var Pe=D.a.div(Ue()),Ie=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.albums;return o.a.createElement(Pe,{className:"dex-photos-formatter"},e.map(function(e,t){return o.a.createElement(De,{key:t,album:e})}))}}]),t}(o.a.Component),Te=new(function(){function e(){Object(u.a)(this,e),this.drupal=null}return Object(d.a)(e,[{key:"setDrupal",value:function(e){this.drupal=e}},{key:"t",value:function(e){return this.drupal.t(e)}}]),e}());window.dexpService=new fe,window.dexpTranslate=Te,window.dexpRenderWidget=function(e,t){window.dexpTranslate.setDrupal(t),c.a.each(e,function(e,t){var n=document.getElementById("".concat(e.id,"-textarea"));r.a.render(o.a.createElement(he,{key:t,inputElement:n,albums:e.albums}),document.getElementById(e.id))})},window.dexpRenderFormatter=function(e,t){window.dexpTranslate.setDrupal(t),c.a.each(e,function(e,t){r.a.render(o.a.createElement(Ie,{key:t,albums:e.albums}),document.getElementById(e.id))})},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[182,1,2]]]);
//# sourceMappingURL=main.aad1c8da.chunk.js.map