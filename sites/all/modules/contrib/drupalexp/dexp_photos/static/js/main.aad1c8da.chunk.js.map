{"version":3,"sources":["serviceWorker.js","utils.js","components/add-album.js","context/widget-context.js","components/edit-photo.js","components/photo-upload-teaser.js","components/album-photos.js","components/album-view.js","components/album.js","components/album-grid.js","components/widget.js","service.js","components/slideshow.js","components/formatter-album.js","components/formatter.js","index.js","translation.js"],"names":["Boolean","window","location","hostname","match","t","text","dexpTranslate","AddAlbum","state","title","description","loading","error","handleOnChange","e","name","target","value","_this","setState","Object","defineProperty","handleSubmit","preventDefault","addAlbum","_this$props","props","onAlbumSaved","album","_this$state","data","uid","dexpService","put","concat","id","then","res","catch","_","get","toLocaleString","post","console","log","handleOk","handleCancel","this","_this$props2","visible","_this$state2","react_default","a","createElement","es_modal","confirmLoading","onOk","onCancel","es_form","onSubmit","es_alert","message","type","Item","input","onChange","placeholder","TextArea","React","Component","createContext","albums","settings","EditPhoto","save","onSave","_photo$response","photo","response","confirm","Modal","Container","styled","div","_templateObject","ImageContainer","_templateObject2","PhotoUploadTeaser","hover","modal","editPhoto","_this2","onDelete","filename","menu","widget_context","Consumer","context","es_menu","status","onClick","icon","content","handleDeletePhoto","className","dropdown","onVisibleChange","f","overlay","progress","width","percent","src","alt","centered","footer","style","maxWidth","edit_photo_EditPhoto","_ref","SortList","album_photos_templateObject","AlbumPhotos","previewVisible","previewImage","photos","handleChange","file","_index","findIndex","p","push","addPhotoToAlbum","onSortEnd","_ref2","oldIndex","newIndex","_ref3","arrayMove","updates","forEach","i","weight","setAlbumPhotos","albumId","length","map","items","each","d","_this3","uploadButton","baseUrl","getBaseUrl","SortableItem","SortableElement","_ref4","photo_upload_teaser_PhotoUploadTeaser","index","ph","filter","SortableList","SortableContainer","_ref5","key","distance","axis","upload","withCredentials","multiple","showUploadList","action","viewAlbum","listType","onPreview","handlePreview","album_view_templateObject","AlbumView","edit","onBack","handleDeleteAlbum","album_view_Container","page_header","subTitle","tags","album_photos_AlbumPhotos","add_album_AddAlbum","onAlbumUpdated","Meta","Card","album_templateObject","Placeholder","album_templateObject2","Album","coverImage","album_Container","card","size","hoverable","cover","AddAlbumContainer","album_grid_templateObject","album_grid_templateObject2","Row","_templateObject3","Col","_templateObject4","AlbumGrid","handleSortAlbums","handleViewAlbum","span","album_Album","justify","album_grid_Container","handleShowAddAlbumModal","openNotificationWithIcon","notification","Widget","showAddAlbum","handleUpdateTextarea","inputElement","albumIds","JSON","stringify","toConsumableArray","assign","delete","item","album_id","_this$state3","handleBackToRoot","_this$state4","Provider","album_view_AlbumView","album_grid_AlbumGrid","Service","classCallCheck","getUrl","path","getOptions","headers","Content-Type","config","arguments","undefined","axios","defaults","url","newUrl","charAt","slice","slideshow_templateObject","Thumbnails","slideshow_templateObject2","ThumbImage","img","slideshow_templateObject3","active","Slideshow","innerWidth","document","addEventListener","onKeydown","bind","onResize","removeEventListener","event","keyCode","handleExitFullScreen","prev","next","onExit","activePhoto","slideshow_Container","formatter_album_templateObject","MainImage","formatter_album_templateObject2","Thumbnail","formatter_album_templateObject3","FormatterAlbum","slideshow","firstPhoto","count","thumbnails","formatter_album_Container","badge","backgroundColor","color","boxShadow","slideshow_Slideshow","formatter_templateObject","Formatter","formatter_Container","formatter_album_FormatterAlbum","translation","Translation","drupal","Drupal","dexpRenderWidget","setDrupal","textAreaElement","getElementById","ReactDOM","render","widget_Widget","dexpRenderFormatter","formatter_Formatter","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.aad1c8da.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const t = (text) => {\n  return window.dexpTranslate.t(text);\n}\n","import React from 'react'\nimport { Modal,Input,Form, Alert} from 'antd';\nimport _ from 'lodash'\nimport {t} from \"../utils\";\n\nexport default class AddAlbum extends React.Component{\n\n  state = {\n    title: '',\n    description: '',\n    loading: false,\n    error: null,\n  }\n\n\n  componentDidMount() {\n\n    const {album} = this.props\n\n    if(album){\n      this.setState({\n        title: album.title,\n        description: album.description\n      })\n    }\n\n  }\n\n  handleOnChange = (e) => {\n    const {name} = e.target;\n    const {value} = e.target;\n\n    this.setState({\n      [name]: value\n    })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.addAlbum();\n\n  }\n\n  addAlbum = () => {\n\n    const {onAlbumSaved, album} = this.props\n    const {title, description} = this.state\n    \n\n    const data = {\n      title,\n      description,\n    }\n\n    this.setState({\n      loading: true,\n      error: null\n    }, () => {\n\n      if(!album){\n        window.dexpService.post('/dexp/albums', data).then((res) => {\n\n          this.setState({\n            loading: false,\n            error: null,\n          }, () => {\n            if(onAlbumSaved){\n              onAlbumSaved(res.data)\n            }\n          })\n        }).catch(e => {\n          console.log(e);\n\n          this.setState({\n            loading: false,\n            error: _.get(e, 'response.data.error', e.toLocaleString())\n          })\n        })\n      }else{\n\n        data.uid = album.uid;\n\n        window.dexpService.put(`/dexp/albums/${album.id}`, data).then((res) => {\n\n          if(onAlbumSaved){\n            onAlbumSaved(res.data)\n          }\n\n        }).catch(e => {\n          this.setState({\n            loading: false,\n            error: _.get(e, 'response.data.error', e.toLocaleString())\n          })\n\n        })\n\n      }\n\n\n    })\n\n\n  }\n\n  handleOk = () => {\n    this.addAlbum();\n  }\n\n  handleCancel = () => {\n    const {handleCancel} = this.props\n    if(handleCancel){\n      handleCancel();\n    }\n  }\n\n\n\n\n  render() {\n\n    const {visible, album} = this.props;\n    const {title, description,loading, error} = this.state;\n\n\n    return (\n      <div>\n        <Modal\n          confirmLoading={loading}\n          title={album ? t('Edit Album') : t('Add new album')}\n          visible={visible}\n          onOk={this.handleOk}\n          onCancel={this.handleCancel}>\n          <Form onSubmit={this.handleSubmit}>\n            {error ? <Alert message={error} type=\"error\" /> : null }\n            <Form.Item>\n              <Input name=\"title\" onChange={this.handleOnChange} value={title} placeholder={t('Album title')} />\n            </Form.Item>\n            <Form.Item>\n              <Input.TextArea name=\"description\" onChange={this.handleOnChange} value={description} placeholder={t('Album description')} />\n            </Form.Item>\n          </Form>\n        </Modal>\n      </div>\n    );\n  }\n\n}\n","import React from \"react\";\n\nexport default React.createContext({\n  albums: [],\n  settings: []\n});\n","import React from 'react'\nimport {Alert, Modal,Input,Form} from \"antd\";\nimport {t} from \"../utils\";\n\nexport default class EditPhoto extends React.Component{\n\n  state = {\n    loading: false,\n    error: null,\n    title: '',\n    description: '',\n  }\n\n  componentDidMount() {\n\n\n    const {photo} = this.props\n\n    const {title, description} = photo.response;\n    this.setState({\n      title,\n      description\n    })\n  }\n\n  handleOk = () => {\n    this.save();\n  }\n\n  handleCancel = () => {\n    const {handleCancel} = this.props\n    if(handleCancel){\n      handleCancel();\n    }\n  }\n\n\n  handleOnChange = (e) => {\n    const {name} = e.target;\n    const {value} = e.target;\n\n    this.setState({\n      [name]: value\n    })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.save();\n\n  }\n\n  save = () => {\n    const {title, description} = this.state\n    const {onSave} = this.props\n\n    if(onSave){\n      onSave({title, description})\n    }\n\n\n  }\n\n\n  render(){\n\n    const {visible} = this.props\n    const {loading,error, title, description} = this.state\n\n    return (\n      <Modal\n        confirmLoading={loading}\n        title={t('Edit photo')}\n        visible={visible}\n        onOk={this.handleOk}\n        onCancel={this.handleCancel}>\n        <Form onSubmit={this.handleSubmit}>\n          {error ? <Alert message={error} type=\"error\" /> : null }\n          <Form.Item>\n            <Input name=\"title\" onChange={this.handleOnChange} value={title} placeholder={t('Photo title')} />\n          </Form.Item>\n          <Form.Item>\n            <Input.TextArea name=\"description\" onChange={this.handleOnChange} value={description} placeholder={t('Photo description')} />\n          </Form.Item>\n        </Form>\n      </Modal>\n    )\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport _ from 'lodash'\nimport {Icon, Progress,Menu, Dropdown, Modal} from 'antd'\nimport WidgetContext from '../context/widget-context'\nimport EditPhoto from \"./edit-photo\";\nimport {t} from \"../utils\";\n\nconst {confirm} = Modal\n\nconst Container = styled.div `\n  width: 104px;\n  height: 104px;\n  text-align: center;\n  float: left;\n  position: relative;\n  overflow: hidden;\n  margin: 5px;\n  padding: 8px;\n  background: ${props => props.error ? '#fff1f0' : 'none'};\n  .preview-image{\n    max-width: 100%;\n  }\n  .dexp-photo-grid-inner{\n    height: 100%;\n  }\n   .dexp-photo-item-done{\n    img{\n      max-width: 100%;\n      width: 100%;\n      height: auto;\n    }\n   }\n   .dexp-photo-action-hover{\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 2px;\n    background: #FFF;\n    display: none;\n    z-index: 2;\n   }\n   \n   &:hover, &.on-hover{\n    .dexp-photo-action-hover{\n      display: block;\n    }\n    .dexp-photo-grid-inner{\n      &:before{\n      content: '';\n        position: absolute;\n        background: rgba(0,0,0,0.3);\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 1;\n      }\n    }\n   }\n`\n\nconst ImageContainer = styled.div `\n  display: flex;\n  flex-grow: 1;\n  text-align: center;\n  justify-content: center;\n\n`\nexport default class PhotoUploadTeaser extends React.Component{\n\n  state = {\n    hover: false,\n    modal: false,\n    editPhoto: false\n  }\n\n  render() {\n    const {hover, modal,editPhoto} = this.state\n    const {photo,onDelete,onSave} = this.props\n\n\n    const filename = _.get(photo, 'response.title', photo.name)\n    const error = _.get(photo, 'status') === 'error'\n    const menu = (\n     <WidgetContext.Consumer>\n       {\n         context => (\n           <Menu>\n             {\n               photo.status === 'done' && <Menu.Item onClick={() => {\n\n                 this.setState({\n                   editPhoto: true,\n                 })\n               }}>\n                 <Icon type=\"edit\" /> Edit\n               </Menu.Item>\n             }\n             <Menu.Item onClick={() => {\n\n               confirm({\n                 title: t('Delete photo'),\n                 content: t('Please confirm that you want to delete this picture?'),\n                 onOk() {\n\n                   if(onDelete){\n                     onDelete(photo)\n                   }\n                   if(photo.response){\n                     context.handleDeletePhoto(photo.response)\n                   }\n\n\n                 },\n                 onCancel() {},\n               })\n\n\n\n             }}>\n               <Icon type=\"delete\" /> Delete\n             </Menu.Item>\n           </Menu>\n         )\n       }\n     </WidgetContext.Consumer>\n    );\n\n\n    return (\n      <WidgetContext.Consumer>\n        {\n          context => (\n            <Container error={error} className={`dexp-photo-widget-grid ${hover ? 'on-hover' : ' no-hover'}`}>\n              <div className=\"dexp-photo-action-hover\">\n                <Dropdown\n                  onVisibleChange={(f) => {\n                    this.setState({hover: f})\n                  }} overlay={menu}>\n                  <a className=\"ant-dropdown-link\">\n                    <Icon type=\"ellipsis\" />\n                  </a>\n                </Dropdown>\n              </div>\n              <div onClick={() => {\n                if(photo.status==='done'){\n                  this.setState({modal: true})\n                }\n\n              }} className=\"dexp-photo-grid-inner\">\n                {\n                  photo.status === 'uploading' && <div className=\"dexp-photo-item-uploading\">\n                    <Progress width={80} type=\"circle\" percent={_.get(photo, 'percent')} />\n\n                  </div>\n                }\n                {\n                  photo.status === 'done' && <div className=\"dexp-photo-item-done\">\n                    <img src={_.get(photo, 'response.file.thumbnail')} alt={photo.response.title} />\n                  </div>\n                }\n                { photo.status === 'error' && <div>Upload error</div> }\n                <div className=\"filename\">{filename}</div>\n              </div>\n\n              <Modal\n                width=\"90%\"\n                centered\n                visible={modal}\n                title={filename}\n                onCancel={() => {\n\n                  this.setState({\n                    modal: false\n                  })\n                }}\n                footer={null}\n              >\n                <ImageContainer className=\"image-preview-container\">\n                  <img style={{maxWidth: '100%'}} className=\"preview-image\" src={_.get(photo, 'response.file.preview')} alt=\"\" />\n                </ImageContainer>\n              </Modal>\n\n              {editPhoto ? <EditPhoto\n                onSave={({title,description}) => {\n\n                  let data = photo;\n                  data.response.title = title;\n                  data.response.description = description;\n\n                  window.dexpService.put(`/dexp/photos/${photo.response.id}`, data.response);\n\n\n\n                  if(onSave){\n                    onSave(data)\n                  }\n\n                }}\n                handleCancel={() => {\n                  this.setState({\n                    editPhoto: false\n                  })\n                }}\n                visible photo={photo}/>: null }\n\n            </Container>\n          )\n        }\n      </WidgetContext.Consumer>\n    )\n  }\n}\n","import React from 'react'\nimport { Upload, Icon, Modal } from 'antd';\nimport {SortableContainer, SortableElement} from 'react-sortable-hoc';\nimport arrayMove from 'array-move';\nimport styled from 'styled-components'\nimport _ from 'lodash'\nimport WidgetContext from '../context/widget-context'\nimport PhotoUploadTeaser from \"./photo-upload-teaser\";\n\nconst SortList = styled.div `\n  display: table;\n  float: left;\n  \n`\nexport default class AlbumPhotos extends React.Component {\n  state = {\n    previewVisible: false,\n    previewImage: '',\n    photos:[],\n  };\n\n\n  componentDidMount() {\n\n    let {photos, albumId} = this.props\n    if(photos.length){\n      photos = photos.map((i) => {\n        return {\n          uid: i.id,\n          status: 'done',\n          response: i\n        }\n      })\n\n      this.setState({\n        photos\n      })\n    }\n\n\n    window.dexpService.get(`/dexp/albums/${albumId}/photos`).then((res) => {\n\n      const items = [];\n\n      _.each(res.data, (d) => {\n\n        items.push({\n          uid: d.id,\n          status: 'done',\n          response: d\n        })\n\n      })\n\n      this.setState({\n        photos: items\n      })\n    })\n\n  }\n\n  handleChange = ({ file }, context)  => {\n\n    const {photos} = this.state\n\n    const _index = photos.findIndex((p) => p.uid === file.uid);\n\n    if(_index !== -1){\n      photos[_index] = file\n    }else{\n      photos.push(file)\n    }\n\n    this.setState({ photos})\n\n    if(file.status === 'done'){\n      context.addPhotoToAlbum(_.get(file, 'response'))\n    }\n\n  }\n\n\n  onSortEnd = ({oldIndex, newIndex}, context) => {\n\n\n    this.setState(({photos}) => ({\n      photos: arrayMove(photos, oldIndex, newIndex),\n    }), () => {\n\n      const updates = [];\n\n      const photos = []\n\n      this.state.photos.forEach((p, i) => {\n        updates.push({\n          id: _.get(p, 'response.id'),\n          weight: i\n        })\n\n        photos.push(_.get(p, 'response'))\n      })\n\n      window.dexpService.put('/dexp/photos/batch-update-weight', updates);\n      context.setAlbumPhotos(photos);\n      \n    });\n  };\n\n\n\n  render() {\n\n    let {photos} = this.state\n\n\n    const { previewVisible, previewImage } = this.state;\n    const uploadButton = (\n      <div>\n        <Icon type=\"plus\" />\n        <div className=\"ant-upload-text\">Upload</div>\n      </div>\n    );\n\n\n    const baseUrl = window.dexpService.getBaseUrl()\n\n    const SortableItem = SortableElement(({value}) => (\n\n\n      <PhotoUploadTeaser\n        onSave={(photo) => {\n\n          const index = photos.findIndex((p) => p.response.id === photo.id)\n          if(index !== -1){\n            photos[index] = photo\n          }\n          this.setState({\n            photos\n          })\n        }}\n        onDelete={(ph) => {\n\n        photos = photos.filter((p ) => p.uid !== ph.uid)\n\n\n        this.setState({photos})\n\n      }} photo={value}/>\n    ));\n\n    const SortableList = SortableContainer(({items}) => {\n      return (\n        <SortList className=\"dexp-photos-grid\">\n          {items.map((value, index) => (\n            <SortableItem key={`item-${index}`} index={index} value={value} />\n          ))}\n        </SortList>\n      );\n    });\n\n\n\n    return (\n      <WidgetContext.Consumer>\n        {\n\n          context => (\n\n            <div className=\"clearfix\">\n              <SortableList\n                distance={5}\n                axis=\"xy\" items={photos} onSortEnd={(value) => this.onSortEnd(value, context)} />\n\n              <Upload\n                withCredentials\n                name=\"files\"\n                multiple\n                showUploadList={false}\n                action={`${baseUrl}/dexp/albums/${context.viewAlbum.id}/photos`}\n                listType=\"picture-card\"\n                onPreview={this.handlePreview}\n                onChange={(value) => this.handleChange(value, context)}\n              >\n                {uploadButton}\n              </Upload>\n              <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\n                <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n              </Modal>\n            </div>\n          )\n        }\n      </WidgetContext.Consumer>\n    );\n  }\n}\n","import React from 'react'\nimport {PageHeader, Icon,Menu, Dropdown, Modal} from 'antd'\nimport styled from 'styled-components'\nimport AlbumPhotos from \"./album-photos\";\nimport AddAlbum from \"./add-album\";\nimport WidgetContext from '../context/widget-context'\nimport {t} from \"../utils\";\n\nconst {confirm} = Modal;\nconst Container = styled.div `\n\n\n`\n\nexport default class AlbumView extends React.Component{\n\n  state = {\n    edit: false\n  }\n\n  render() {\n\n    const {edit}  = this.state\n    const {album, onBack} = this.props\n\n    const menu = (\n      <WidgetContext.Consumer>\n        {\n          context => (\n            <Menu>\n              <Menu.Item onClick={() => {\n\n\n                this.setState({\n                  edit: true\n                })\n\n              }}>\n                <Icon type=\"edit\" /> Edit\n              </Menu.Item>\n\n              <Menu.Item onClick={() => {\n                confirm({\n                  title: t('Delete album'),\n                  content: t('Please confirm that you want to delete this album?'),\n                  onOk() {\n                    context.handleDeleteAlbum(album)\n                  },\n                  onCancel() {},\n                })\n\n              }}>\n                <Icon type={t('delete')} /> Delete\n              </Menu.Item>\n            </Menu>\n          )\n        }\n\n      </WidgetContext.Consumer>\n    );\n\n\n    return (\n      <WidgetContext.Consumer>\n\n        {\n          context => (\n            <Container className=\"dexp-album-details\">\n\n              <PageHeader\n                onBack={() => {\n                  if(onBack){\n                    onBack()\n                  }\n                }}\n                title={album.title}\n                subTitle={album.description}\n                tags={\n                  <Dropdown overlay={menu}>\n                    <a className=\"ant-dropdown-link\">\n                      Actions <Icon type=\"ellipsis\" />\n                    </a>\n                  </Dropdown>\n                }\n              />\n\n              <AlbumPhotos albumId={album.id} photos={context.viewAlbum.photos ? context.viewAlbum.photos:[] }/>\n              {\n                edit && <AddAlbum\n                  onAlbumSaved={(data) => {\n                    this.setState({\n                      edit: false,\n                    })\n\n                    context.onAlbumUpdated(data);\n                  }}\n                  handleCancel={() => {\n                    this.setState({\n                      edit: false\n                    })\n                  }}\n\n                  visible album={album}/>\n              }\n            </Container>\n          )\n        }\n      </WidgetContext.Consumer>\n    )\n  }\n}\n","import React from 'react'\nimport { Card } from 'antd';\nimport styled from 'styled-components'\nimport _ from 'lodash'\n\nconst {Meta} = Card\n\nconst Container = styled.div `\n  padding: 5px;\n  img{\n      max-height: 150px;\n    \n  }\n  \n \n`\nconst Placeholder = styled.div `\n  background: rgba(0,0,0,0.02);\n  min-height: 150px;\n`\nexport default class Album extends React.Component{\n\n\n  render() {\n\n    const {album} = this.props\n\n    const coverImage = _.get(album,  'photos[0].file.preview')\n    return (\n      <Container className=\"dexp-photos-album\">\n        <Card\n          size=\"small\"\n          hoverable\n          cover={coverImage ? <img alt={album.title} src={coverImage} /> : <Placeholder />}\n        >\n          <Meta\n            title={album.title}\n            description={album.description}\n          />\n        </Card>\n\n      </Container>\n    )\n  }\n}\n","import React from 'react'\nimport {Icon} from \"antd\";\nimport styled from \"styled-components\";\nimport {SortableContainer, SortableElement} from 'react-sortable-hoc';\nimport Album from \"./album\";\nimport WidgetContext from '../context/widget-context'\n\nconst AddAlbumContainer = styled.div `\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n  align-content: center;\n  padding: 20px;\n  float: left;\n  width: 200px;\n  height: 220px;\n`\n\nconst Container = styled.div `\n  display: table;\n  &:before, &:after{\n    clear: both;\n    content: '';\n  }\n  .ant-card-cover{\n    min-height: 150px;\n  }\n  \n`\n\nconst Row = styled.div `\n  float: left;\n  display: table;\n  &:before, &:after{\n    clear: both;\n    content: '';\n  }\n \n`\nconst Col = styled.div `\n margin-bottom: 10px;\n float: left;\n width: 200px;\n height: 220px;\n`\n\nexport default class AlbumGrid extends React.Component{\n\n\n\n  onSortEnd = ({oldIndex, newIndex}, context) => {\n    context.handleSortAlbums(oldIndex, newIndex)\n  }\n\n  render() {\n\n\n\n    const SortableItem = SortableElement(({album, context}) => (\n      <Col onClick={() => context.handleViewAlbum(album)} span={3}><Album album={album} /></Col>\n    ));\n\n    const SortableList = SortableContainer(({items, context}) => {\n      return (\n        <Row type=\"flex\" justify=\"start\" className=\"dexp-photos-grid\">\n          {items.map((value, index) => (\n            <SortableItem context={context} key={`item-${index}`} index={index} album={value} />\n          ))}\n        </Row>\n      );\n    });\n\n\n\n    return (\n      <WidgetContext.Consumer>\n        {\n          context => (\n            <Container type=\"flex\" justify=\"start\" className=\"dexp-photos-grid-container\">\n              <SortableList\n                context={context}\n                distance={5}\n                axis=\"xy\" items={context.albums} onSortEnd={(value) => this.onSortEnd(value, context)} />\n              <AddAlbumContainer  onClick={context.handleShowAddAlbumModal}>\n                <Icon type=\"plus\" />\n                <div>Create album</div>\n              </AddAlbumContainer>\n            </Container>\n          )\n        }\n\n      </WidgetContext.Consumer>\n    )\n  }\n}\n","import React from 'react'\nimport {notification} from 'antd'\nimport _ from 'lodash'\nimport arrayMove from \"array-move\";\nimport AddAlbum from \"./add-album\";\nimport AlbumView from \"./album-view\";\nimport AlbumGrid from \"./album-grid\";\nimport WidgetContext from '../context/widget-context'\n\nconst openNotificationWithIcon = (type, title, message) => {\n  notification[type]({\n    message: title,\n    description: message\n  });\n};\n\nexport default class Widget extends React.Component{\n\n  state = {\n    showAddAlbum: false,\n    viewAlbum: null,\n    albums: [\n    ],\n  }\n\n\n  componentDidMount() {\n\n    const {albums} = this.props;\n\n    this.setState({\n      albums\n    })\n\n  }\n\n  handleUpdateTextarea = () => {\n    const {inputElement} = this.props\n    const {albums} = this.state\n\n    const albumIds = [];\n\n    albums.forEach((a) => {\n      albumIds.push(a.id)\n    })\n    \n    inputElement.value = JSON.stringify(albumIds);\n\n  }\n\n\n\n  handleShowAddAlbumModal = () => {\n    this.setState({\n      showAddAlbum: true\n    })\n  }\n\n  onAlbumSaved = (data) => {\n\n    const {albums} = this.state\n\n    this.setState({\n      albums: [...albums, data],\n      showAddAlbum: false\n    }, () => {\n      this.handleUpdateTextarea()\n    })\n  }\n\n  onAlbumUpdated = (album) => {\n\n    const {viewAlbum} = this.state\n\n    if(viewAlbum.id === album.id){\n      this.setState({\n        viewAlbum: Object.assign(viewAlbum, album)\n      })\n    }\n\n    const {albums} = this.state;\n\n    albums.map((a) => {\n\n      if(a.id === album.id){\n        return Object.assign(a, album)\n      }\n\n      return a\n    })\n\n    this.setState({\n      albums\n    })\n  }\n\n  handleViewAlbum = (album) => {\n    this.setState({\n      viewAlbum: album\n    })\n  }\n\n  handleDeleteAlbum = (album) => {\n\n    let {albums} = this.state\n     albums = albums.filter((i) => i.id !== album.id)\n\n    this.setState({\n      viewAlbum:null,\n      albums\n    }, () => {\n      this.handleUpdateTextarea()\n      window.dexpService.delete(`/dexp/albums/${album.id}`).catch((e) => {\n        openNotificationWithIcon('error', 'Delete album error', _.get(e, 'response.data.error', e.toLocaleString()))\n      })\n    })\n  }\n\n  setAlbumPhotos = (items) => {\n\n    const {viewAlbum, albums} = this.state\n    viewAlbum.photos = items\n    albums.map((i) => {\n\n      if(i.id === viewAlbum.id){\n        i.photos = items\n      }\n\n      return i\n    })\n\n    this.setState({\n      viewAlbum,\n      albums\n    })\n\n  }\n\n  addPhotoToAlbum = (item) => {\n    let {viewAlbum, albums} = this.state\n\n    if(viewAlbum.id === item.album_id){\n      if(!viewAlbum.photos){\n        viewAlbum.photos = []\n      }\n      viewAlbum.photos = viewAlbum.photos.filter((i) => i.id !== item.id)\n\n      const index = viewAlbum.photos.findIndex((i) => i.id === item.id)\n\n      if(index === -1){\n        viewAlbum.photos.push(item)\n      }else{\n        viewAlbum.photos[index] = item;\n      }\n\n    }\n\n    albums = albums.map((i) => {\n\n      if(i.id === viewAlbum.id){\n        return viewAlbum\n      }\n      return i\n    })\n\n    this.setState({\n      viewAlbum,\n      albums\n    })\n  }\n\n  handleDeletePhoto = (item) => {\n\n    let {viewAlbum, albums} = this.state\n\n    if(!viewAlbum.photos){\n      viewAlbum.photos = []\n    }\n\n    viewAlbum.photos = viewAlbum.photos.filter((p) => p.id !== item.id);\n\n    albums = albums.map((i) => {\n      if(i.id === viewAlbum.id){\n        return viewAlbum\n      }\n      return i\n    })\n\n    this.setState({\n      viewAlbum,\n      albums\n    }, () => {\n\n      window.dexpService.delete(`/dexp/photos/${item.id}`).catch((e) => {\n        openNotificationWithIcon('error', 'Delete photo error', _.get(e, 'response.data.error', e.toLocaleString()))\n      })\n    })\n\n\n\n  }\n\n  handleBackToRoot = () => {\n\n    this.setState({\n      viewAlbum: false\n    })\n  }\n\n  handleSortAlbums = (oldIndex, newIndex) => {\n    this.setState(({albums}) => ({\n      albums: arrayMove(albums, oldIndex, newIndex),\n    }), () => {\n\n      this.handleUpdateTextarea();\n    })\n\n  }\n\n  render() {\n\n    const {albums,showAddAlbum, viewAlbum} = this.state\n\n    return (\n      <WidgetContext.Provider value={{\n        albums,\n        viewAlbum,\n        handleShowAddAlbumModal: this.handleShowAddAlbumModal,\n        onAlbumSaved: this.onAlbumSaved,\n        handleViewAlbum: this.handleViewAlbum,\n        handleBackToRoot: this.handleBackToRoot,\n        onAlbumUpdated: this.onAlbumUpdated,\n        handleDeleteAlbum: this.handleDeleteAlbum,\n        setAlbumPhotos: this.setAlbumPhotos,\n        addPhotoToAlbum: this.addPhotoToAlbum,\n        handleDeletePhoto: this.handleDeletePhoto,\n        handleSortAlbums: this.handleSortAlbums\n      }}>\n\n        <div className=\"dexp-photos-widget\">\n          {viewAlbum ? <AlbumView onBack={() => {\n            this.setState({\n              viewAlbum: null\n            })\n          }} album={viewAlbum}/> : <AlbumGrid/>}\n\n          {showAddAlbum ? <AddAlbum\n            onAlbumSaved={this.onAlbumSaved}\n            visible={showAddAlbum} handleCancel={() => {\n            this.setState({\n              showAddAlbum: false\n            })\n          }}/>: null}\n\n        </div>\n\n      </WidgetContext.Provider>\n    );\n  }\n\n}\n","import axios from 'axios'\n\nexport default class Service{\n\n  constructor() {\n    this.baseUrl = \"\";\n    axios.defaults.withCredentials = true\n  }\n\n  setBaseUrl(url){\n\n    let newUrl = '';\n    if(url.length && url.charAt(url.length -1) === '/'){\n      newUrl = url.slice(0, -1);\n    }\n    this.baseUrl = newUrl;\n  }\n\n  getUrl = (path) => {\n\n    return `${this.baseUrl}${path}`\n  }\n\n  getBaseUrl(){\n\n    return this.baseUrl\n  }\n\n  getOptions = () => {\n    return {\n      headers: {\n        'Content-Type': 'application/json',\n      }\n    };\n  }\n\n  get = (path, options = null) => {\n\n    let config = options;\n\n    if(config === null){\n      config = this.getOptions()\n    }\n    return axios.get(this.getUrl(path), config)\n  }\n\n  post =  (path, data, options = null) => {\n\n    let config = options;\n\n    if(config === null){\n      config = this.getOptions()\n    }\n\n    return axios.post(this.getUrl(path), data, config)\n  }\n\n  put = (path, data, options = null) => {\n\n    let config = options;\n\n    if(config === null){\n      config = this.getOptions()\n    }\n\n    return axios.put(this.getUrl(path), data, config)\n  }\n\n  upload = (path, file, options = null) => {\n\n  }\n\n  delete = (path, options=null) => {\n\n    let config = options;\n\n    if(config === null){\n      config = this.getOptions()\n    }\n    return axios.delete(this.getUrl(path), config)\n  }\n\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport _ from 'lodash'\nimport {Icon} from 'antd'\n\nconst Container = styled.div `\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(134,134,134,1);\n  z-index: 10000;\n  display: flex;\n  .dexp-photos-exit-fullscreen{\n    color: #FFF;\n    position: absolute;\n    right: 10px;\n    top: 10px;\n  }\n  .dexp-photos-slideshow-inner{\n    display: flex;\n    flex-grow: 1;\n    flex-direction: column;\n  }\n  .dexp-photos-main-photo{\n    padding: 10px;\n    flex-grow: 1;\n    height: calc(100% - 150px);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    img{\n      max-width: 100%;\n      max-height: 100%;\n    }\n  }\n  .dexp-photos-thumbnails{\n     height: 110px;\n     display: flex;\n     justify-content: center;\n     img{\n        cursor: pointer;\n        width: 100px;\n        height: 100px;\n        margin-left: 5px;\n     }\n  }\n  .dexp-photos-slideshow-nav{\n    cursor: pointer;\n    padding: 5px;\n    color: #FFF;\n    left: 20px;\n    top: 45%;\n    position: absolute;\n    &.dexp-photos-next{\n      left: auto;\n      right: 20px;\n    }\n    \n  }\n`\n\nconst Thumbnails = styled.div `\n overflow-y: hidden;\n overflow-x: auto;\n padding: 5px 5px 5px 0;\n width: ${props => props.width}px;\n`\n\nconst ThumbImage = styled.img `\n \n  opacity: ${props => props.active ? 0.7 : 1};\n\n`\n\nexport default class Slideshow extends React.Component{\n\n  state = {\n    photos: [],\n    active: 0,\n    width: window.innerWidth,\n  }\n\n\n  componentDidMount() {\n\n    const {album, active} = this.props\n    document.addEventListener(\"keydown\", this.onKeydown.bind(this), false);\n    window.addEventListener('resize', this.onResize.bind(this))\n\n    this.setState({\n      photos: album.photos,\n      width: window.innerWidth,\n      active\n    })\n\n\n    window.dexpService.get(`/dexp/albums/${album.id}/photos`).then((res) => {\n      this.setState({\n        photos: res.data,\n      })\n    })\n  }\n\n\n\n  componentWillUnmount(){\n    document.removeEventListener(\"keydown\", this.onKeydown.bind(this), false);\n    window.removeEventListener('resize', this.onResize.bind(this))\n  }\n\n  onResize(){\n    this.setState({\n      width: window.innerWidth\n    })\n  }\n\n  onKeydown(event){\n\n    if(event.keyCode === 27){\n      this.handleExitFullScreen()\n    }\n\n    if(event.keyCode === 37){\n      this.prev()\n    }\n    if(event.keyCode === 39){\n      this.next()\n    }\n  }\n\n  handleExitFullScreen(){\n    const {onExit} = this.props\n    if(onExit){\n      onExit()\n    }\n  }\n\n  prev(){\n    const {active, photos} = this.state\n\n    let value = active -1;\n    if(active === 0){\n      value = photos.length -1;\n\n    }\n    this.setState({\n      active:value\n    })\n  }\n\n  next(){\n    const {active, photos} = this.state\n\n    let value = active + 1;\n    if(active === photos.length -1){\n      value = 0;\n    }\n    this.setState({\n      active:value\n    })\n  }\n\n  render() {\n    const {photos,active, width} = this.state\n    const activePhoto = photos[active]\n\n    return (\n      <Container id=\"dex-photos-slideshow\">\n        <div className=\"dexp-photos-exit-fullscreen\">\n          <Icon width={50} onClick={() => {\n\n            this.handleExitFullScreen();\n          }} type=\"fullscreen-exit\" />\n        </div>\n        <div onClick={() => {\n          this.prev()\n        }} className=\"dexp-photos-slideshow-nav dexp-photos-prev\">\n          <Icon width={50} type=\"left\" />\n        </div>\n        <div onClick={() => {\n          this.next()\n        }} className=\"dexp-photos-slideshow-nav dexp-photos-next\">\n          <Icon width={50} type=\"right\" />\n        </div>\n        <div className=\"dexp-photos-slideshow-inner\">\n          <div className=\"dexp-photos-main-photo\">\n            <img src={_.get(activePhoto, 'file.preview')} alt=\"\" />\n\n          </div>\n\n          <Thumbnails width={width} className=\"dexp-photos-thumbnails\">\n            {\n              photos.map((p, index) => {\n                return (\n                  <ThumbImage onClick={() => {\n                    this.setState({\n                      active:index\n                    })\n                  }} key={index} active={index === active} src={_.get(p, 'file.thumbnail')} />\n                )\n              })\n            }\n          </Thumbnails>\n\n        </div>\n\n\n      </Container>\n    );\n  }\n\n}\n","import React from 'react'\nimport {Badge} from \"antd\";\nimport _ from 'lodash'\nimport styled from 'styled-components'\nimport {t} from \"../utils\";\nimport Slideshow from \"./slideshow\";\n\nconst Container = styled.div `\n\n.dexp-album-photos{\n  display: flex;\n  flex-direction: row;\n  .dexp-photos-large-photo{\n    flex-grow: 1;\n    img{\n      max-width: 100%;\n      width: 100%;\n      height: auto;\n      max-height: 400px;\n    }\n  }\n  .dexp-thumbnail-photos-thumbnails{\n    position: relative;\n    width: 250px;  \n    height: 450px; \n    display: flex;\n    overflow: hidden;\n    flex-direction: column;\n    img{\n      max-width: 100%;\n      max-height: 200px;\n      \n    }\n  }\n  \n}\n.dexp-photos-see-more{\n  left: 0;\n  text-align: center;\n  position: absolute;\n  bottom: 20px;\n  right: 0;\n  color: #FFF;\n}\n\n`\n\n\nconst MainImage = styled.div `\n  margin-right: 5px;\n  background: url(\"${props => props.img}\") scroll 0 0 no-repeat;\n  background-size: cover; \n  height: 445px;\n  cursor: pointer;\n`\n\nconst Thumbnail = styled.div `\n  background: url(\"${props => props.img}\") scroll 0 0 no-repeat;\n  background-size: cover; \n  width: 220px;\n  height: 220px;\n  margin-bottom: 5px;\n  cursor: pointer;\n  &:last-child{\n  margin-bottom: 0;\n  }\n`\n\n\nexport default class FormatterAlbum extends React.Component{\n\n  state = {\n    slideshow: false,\n    active: 0,\n  }\n\n  render() {\n\n    const {slideshow, active} = this.state\n    const {album} = this.props\n\n\n    const firstPhoto = _.get(album, 'photos[0]', null)\n    const count = _.get(album, 'count', 0)\n\n    const thumbnails = [];\n\n    if(album.photos.length > 1){\n      for (let i = 1; i < album.photos.length; i++) {\n        thumbnails.push(album.photos[i])\n      }\n    }\n\n\n    return (\n      <Container className=\"dexp-photos-album\">\n        <div className=\"dexp-album-title\">{album.title}  <Badge count={album.count} style={{ backgroundColor: '#fff', color: '#999', boxShadow: '0 0 0 1px #d9d9d9 inset' }} /></div>\n        <div className=\"dexp-album-photos\">\n          {\n            firstPhoto ? (\n              <MainImage onClick={() => {\n\n                this.setState({\n                  slideshow: true,\n                  active: 0\n                })\n              }} img={_.get(firstPhoto, 'file.preview', null)} className=\"dexp-photos-large-photo\" />\n            ) : null\n          }\n          {\n            thumbnails.length ? (\n              <div className=\"dexp-thumbnail-photos-thumbnails\">\n                {\n                  thumbnails.map((item, index) => {\n                    return (\n                      <Thumbnail\n                        onClick={() => {\n                          this.setState({\n                            slideshow: true,\n                            active: index+1\n                          })\n                        }}\n                        key={index} img={_.get(item, 'file.preview', null)} className=\"dexp-photos-thumbnail-item\"/>\n                    )\n                  })\n                }\n                {\n                  count - 3 > 0 ? (\n                    <div className=\"dexp-photos-see-more\">\n                      {`${t('See')} ${count - 3} more photos`}\n                    </div>\n                  ): null\n                }\n              </div>\n            ) : null\n          }\n        </div>\n        {slideshow ? <Slideshow onExit={() => {\n          this.setState({\n            slideshow: false,\n          })\n        }} active={active} album={album}/> : null}\n      </Container>\n    )\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {Badge} from 'antd'\nimport FormatterAlbum from \"./formatter-album\";\n\nconst Container = styled.div `\n\n\n\n`\n\n\nexport default class Formatter extends React.Component {\n\n  render(){\n\n    const {albums} = this.props\n\n\n    return (\n      <Container className=\"dex-photos-formatter\">\n        {\n          albums.map((album, key) => {\n           return <FormatterAlbum key={key} album={album}/>\n          })\n        }\n\n      </Container>\n    )\n  }\n}\n","import \"antd/dist/antd.css\"\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport _ from 'lodash'\nimport * as serviceWorker from './serviceWorker'\nimport Widget from \"./components/widget\"\n\nimport Service from \"./service\"\nimport Formatter from \"./components/formatter\"\nimport Translation from \"./translation\"\n\nconst translation = new Translation()\nwindow.dexpService = new Service()\nwindow.dexpTranslate = translation;\n\n\nwindow.dexpRenderWidget = (data, Drupal) => {\n\n  window.dexpTranslate.setDrupal(Drupal);\n\n  _.each(data, (item, key) => {\n    const textAreaElement = document.getElementById(`${item.id}-textarea`)\n    ReactDOM.render(<Widget key={key} inputElement={textAreaElement} albums={item.albums}/>,  document.getElementById(item.id));\n  })\n\n};\n\n\n\n\nwindow.dexpRenderFormatter = (data, Drupal) => {\n\n  window.dexpTranslate.setDrupal(Drupal);\n\n  _.each(data, (item, key) => {\n    ReactDOM.render(<Formatter key={key} albums={item.albums}/>,  document.getElementById(item.id));\n  });\n\n\n}\n\nserviceWorker.unregister();\n","export default class Translation{\n  constructor(){\n    this.drupal = null;\n  }\n\n  setDrupal(Drupal){\n    this.drupal = Drupal\n  }\n\n  t(text){\n    return this.drupal.t(text)\n  }\n}\n"],"sourceRoot":""}